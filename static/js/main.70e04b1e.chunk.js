(this["webpackJsonpsimple-piskel-clone"]=this["webpackJsonpsimple-piskel-clone"]||[]).push([[0],{40:function(e,t,a){e.exports=a.p+"static/media/full-screen.b26a844e.svg"},43:function(e,t,a){e.exports=a.p+"static/media/screen.d6dca46b.jpg"},44:function(e,t,a){e.exports=a.p+"static/media/animation1.c8d39763.gif"},45:function(e,t,a){e.exports=a.p+"static/media/animation2.858d709c.gif"},46:function(e,t,a){e.exports=a.p+"static/media/animation3.0e6b19d8.gif"},47:function(e,t,a){e.exports=a.p+"static/media/animation4.e84dc22e.gif"},48:function(e,t,a){e.exports=a.p+"static/media/animation5.ff97186e.gif"},50:function(e,t,a){e.exports=a(97)},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),o=a(6);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(22),s=a(16),u=a(9),m=a(25),f=function(e){return e.slice(0,3).reduce((function(e,t){return"".concat(e).concat(function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t}(t))}),"#")},d=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]?parseInt(t[4],16):255]:null},v=function(e,t,a,n){return{x:Math.floor((e-n.x)/a),y:Math.floor((t-n.y)/a)}},p=function(e,t){return e.x===t.x&&e.y===t.y},h=function(e,t){var a,n,r,i,c,o,l,s=e.x,u=e.y,m=t.x,f=t.y,d=[],v=m-s,p=f-u,h=Math.abs(v),g=Math.abs(p);if(r=2*g-h,i=2*h-g,g<=h)for(v>=0?(a=s,n=u,c=m):(a=m,n=f,c=s),d.push({x:a,y:n}),l=0;a<c;l+=1)a+=1,r<0?r+=2*g:(v<0&&p<0||v>0&&p>0?n+=1:n-=1,r+=2*(g-h)),d.push({x:a,y:n});else for(p>=0?(a=s,n=u,o=f):(a=m,n=f,o=u),d.push({x:a,y:n}),l=0;n<o;l+=1)n+=1,i<=0?i+=2*h:(v<0&&p<0||v>0&&p>0?a+=1:a-=1,i+=2*(h-g)),d.push({x:a,y:n});return d},g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.forEach((function(t){var n=t.x,r=t.y;e.fillRect(n,r,a,a)}))},b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.forEach((function(t){var n=t.x,r=t.y;e.clearRect(n,r,a,a)}))},_=function(e,t,a){var n=t.x,r=4*(t.y*a+n);return e.slice(r,r+4)},E=function(e){var t=document.createElement("canvas");t.width=e,t.height=e;return t.getContext("2d").getImageData(0,0,e,e)},C=function(e){var t=e.width,a=e.height,n=e.data.slice();return new ImageData(n,t,a)},y=function(e){var t=null;return{clear:function(){t&&clearInterval(t)},start:function(a){t=setInterval(e,a)}}},O=function(e,t){e.clearRect(0,0,t,t)},k=function(e,t,a){e.putImageData(t,0,0,0,0,a,a)},N={isOpenFullscreen:!1,currentTool:"",penSize:1,mainColor:[0,255,0,255],secondColor:[255,128,64,255],canvas:{width:640,height:640,size:64,pixelSize:10},frameRate:0,currentFrame:0,frames:[E(64)]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CURRENT_TOOL":return Object(u.a)({},e,{currentTool:t.payload});case"SET_PEN_SIZE":return Object(u.a)({},e,{penSize:t.payload});case"SET_MAIN_COLOR":return Object(u.a)({},e,{mainColor:t.payload});case"SET_SECOND_COLOR":return Object(u.a)({},e,{secondColor:t.payload});case"SWAP_COLORS":var a=e.mainColor,n=e.secondColor;return Object(u.a)({},e,{mainColor:n,secondColor:a});case"SET_CANVAS_STATE":var r=t.payload.canvasState,i=e.frames,c=e.currentFrame,o=Object(u.a)({},e,{frames:[].concat(Object(s.a)(i.slice(0,c)),[r],Object(s.a)(i.slice(c+1)))});return o;case"ADD_FRAME":var l=e.frames,m=e.currentFrame;return Object(u.a)({},e,{frames:[].concat(Object(s.a)(l.slice(0,m+1)),[t.payload],Object(s.a)(l.slice(m+1))),currentFrame:e.currentFrame+1});case"SET_CURRENT_FRAME":return Object(u.a)({},e,{currentFrame:t.payload});case"DELETE_FRAME":var f=e.frames,d=e.currentFrame,v=t.payload,p=v===f.length-1||d===f.length-1,h=p?d-1:d;return Object(u.a)({},e,{frames:[].concat(Object(s.a)(f.slice(0,v)),Object(s.a)(f.slice(v+1))),currentFrame:h});case"COPY_FRAME":var g=e.frames,b=e.currentFrame,_=t.payload,y=C(g[_]);return Object(u.a)({},e,{frames:[].concat(Object(s.a)(g.slice(0,_+1)),[y],Object(s.a)(g.slice(_+1))),currentFrame:b+1});case"SET_FRAME_RATE":return Object(u.a)({},e,{frameRate:t.payload});case"TOGGLE_PREVIEW_FULLSCREEN":return Object(u.a)({},e,{isOpenFullscreen:t.payload});case"SET_SIZE":var O=e.canvas,k=E(t.payload),j=O.width/t.payload,w=Object(u.a)({},O,{pixelSize:j,size:t.payload});return Object(u.a)({},e,{canvas:w,frames:[k],currentFrame:0});case"SWAP_FRAME":var x=e.frames,F=t.payload,S=F.index1,R=F.index2,z=x[S],A=x[R],L=x.slice();return L[S]=A,L[R]=z,Object(u.a)({},e,{frames:L});default:return e}},w=Object(l.b)(j),x=a(24),F=a(18),S=a(3),R=a(4),z=a(7),A=a(5),L=a(2),M=a(8),T=a(30),D=(a(59),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).state={isAuth:!1},e.responseGoogle=e.responseGoogle.bind(Object(L.a)(e)),e.logout=e.logout.bind(Object(L.a)(e)),e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"responseGoogle",value:function(e){var t=e.profileObj.name;this.setState({isAuth:!0,user:t})}},{key:"logout",value:function(){this.setState({isAuth:!1,user:null})}},{key:"button",value:function(){return this.state.isAuth?r.a.createElement(T.GoogleLogout,{clientId:"658977310896-knrl3gka66fldh83dao2rhgbblmd4un9.apps.googleusercontent.com",render:function(e){return r.a.createElement("button",{className:"log-in__button",type:"button",onClick:e.onClick,disabled:e.disabled},"Logout")},buttonText:"Logout",onLogoutSuccess:this.logout}):r.a.createElement(T.GoogleLogin,{clientId:"236918688577-ebqd0uarejrvpb93t2ha5cai891se6i8.apps.googleusercontent.com",render:function(e){return r.a.createElement("button",{className:"log-in__button",type:"button",onClick:e.onClick,disabled:e.disabled},"Login")},buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement("div",{className:"log-in"},r.a.createElement("p",{className:"log-in__user"},null!==e?e:""),this.button())}}]),t}(n.Component)),I=(a(60),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__body"},r.a.createElement("a",{className:"header__link",href:"/"},"Piskel-clone"),r.a.createElement(D,null)))}),P=function(e){return{type:"SET_MAIN_COLOR",payload:e}},G=function(e){return{type:"TOGGLE_PREVIEW_FULLSCREEN",payload:e}},U=function(e){var t=e.tool,a=e.clickTool,n=e.isActive;return r.a.createElement("button",{type:"button",className:"tool tool--".concat(t.name," ").concat(n?"tool--active":""),onClick:a})},B=(a(61),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).tools=[{name:"pen",key:"p",label:"Pen tool"},{name:"line",key:"l",label:"Stroke tool"},{name:"fill",key:"b",label:"Paint backet tool"},{name:"fill-all",key:"f",label:"Paint all pixels"},{name:"eraser",key:"e",label:"Erser tool"},{name:"pipette",key:"c",label:"Color picker"}],e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"clickHandle",value:function(e){(0,this.props.setCurrentTool)(e)}},{key:"render",value:function(){var e=this,t=this.props.currentTool,a=this.tools.map((function(a,n){return r.a.createElement("li",{key:n,className:"tool-bar__item"},r.a.createElement(U,{tool:a,isActive:a.name===t,clickTool:function(){e.clickHandle(a.name)}}))}));return r.a.createElement("div",{className:"tool-bar"},r.a.createElement("ul",{className:"tool-bar__list"},a))}}]),t}(n.Component)),Y=Object(o.b)((function(e){return{currentTool:e.currentTool}}),{setCurrentTool:function(e){return{type:"CHANGE_CURRENT_TOOL",payload:e}}})(B),W=(a(62),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).handleChangeMainColor=e.handleChangeMainColor.bind(Object(L.a)(e)),e.handleChangeSecondColor=e.handleChangeSecondColor.bind(Object(L.a)(e)),e.handleClick=e.handleClick.bind(Object(L.a)(e)),e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"handleChangeMainColor",value:function(e){var t=this.props.setMainColor,a=e.currentTarget;t(d(a.value))}},{key:"handleChangeSecondColor",value:function(e){var t=this.props.setSecondColor,a=e.currentTarget;t(d(a.value))}},{key:"handleClick",value:function(){(0,this.props.swapColors)()}},{key:"render",value:function(){var e=this.props,t=e.mainColor,a=e.secondColor;return r.a.createElement("div",{className:"color-bar"},r.a.createElement("input",{className:"color-bar__main-color",type:"color",value:f(t),onChange:this.handleChangeMainColor}),r.a.createElement("input",{className:"color-bar__second-color",type:"color",value:f(a),onChange:this.handleChangeSecondColor}),r.a.createElement("button",{type:"button",className:"color-bar__button",onClick:this.handleClick}))}}]),t}(n.Component)),X={setMainColor:P,setSecondColor:function(e){return{type:"SET_SECOND_COLOR",payload:e}},swapColors:function(){return{type:"SWAP_COLORS"}}},H=Object(o.b)((function(e){return{mainColor:e.mainColor,secondColor:e.secondColor}}),X)(W),V=(a(63),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).penSizes=[1,2,3,4],e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.penSizes,t=this.props,a=t.penSize,n=t.setPenSize,i=e.map((function(e,t){return r.a.createElement("li",{key:t,className:"pen-size-panel__item"},r.a.createElement("button",{type:"button",className:"pen-size-panel__button ".concat(e===a?"pen-size-panel__button--active":""),onClick:function(){n(e)}},e))}));return r.a.createElement("div",{className:"pen-size-panel"},r.a.createElement("ul",{className:"pen-size-panel__list"},i))}}]),t}(n.Component)),Z=Object(o.b)((function(e){return{penSize:e.penSize}}),{setPenSize:function(e){return{type:"SET_PEN_SIZE",payload:e}}})(V),q=function(e,t,a,n,r,i){var c=n.pixelSize,o=n.size,l=t,s=l;g(e,[l],i);var u=function(t){var n=t.pageX,r=t.pageY;if(l=v(n,r,c,a),!p(l,s)){var o=h(s,l);g(e,o,i),s=l}};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function t(){r({canvasState:e.getImageData(0,0,o,o)}),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",t)}))},J=function(e,t,a,n,r,i,c){var o=r.pixelSize,l=r.size,s=a,u=s;g(t,[s],c);var m=[],f=function(e){var r=e.pageX,i=e.pageY;s=v(r,i,o,n),p(s,u)||(t.clearRect(0,0,l,l),m=h(a,s),g(t,m,c),u=s)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",(function a(){t.clearRect(0,0,l,l),g(e,m,c),i({canvasState:e.getImageData(0,0,l,l)}),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",a)}))},$=function(e,t,a,n,r,i){var c=n.pixelSize,o=n.size,l=t,s=l;b(e,[l],i);var u=function(t){var n=t.pageX,r=t.pageY;if(l=v(n,r,c,a),!p(l,s)){var o=h(s,l);b(e,o,i),s=l}};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function t(){r({canvasState:e.getImageData(0,0,o,o)}),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",t)}))},K=function(e,t,a,n){var r=a.size,i=e.getImageData(0,0,r,r).data,c=_(i,t,a.size);c.every((function(e){return 0===e}))||n(Array.from(c))},Q=function(e,t,a,n,r){var i=a.size,c=e.getImageData(0,0,i,i).data,o=_(c,t,a.size);if(o!==r){var l=function(e,t,a){for(var n=e.slice(),r=0;r<n.length;r+=4){if(n[r]===t[0]&&n[r+1]===t[1]&&n[r+2]===t[2]&&n[r+3]===t[3]){var i=Object(m.a)(a,4),c=i[0],o=i[1],l=i[2],s=i[3];n[r]=c,n[r+1]=o,n[r+2]=l,n[r+3]=s}}return n}(c,o,r),s=new ImageData(l,i,i);e.putImageData(s,0,0,0,0,i,i),n({canvasState:s})}},ee=function(e,t,a,n,r){var i=a.size,c=e.getImageData(0,0,i,i).data,o=_(c,t,a.size);if(o!==r){var l=function(e,t,a,n,r){for(var i=e.slice(),c=Object(m.a)(r,3),o=c[0],l=c[1],s=c[2],u=[[a.y,a.x]],f=function(e){var t=i[e],a=i[e+1],r=i[e+2];return t===n[0]&&a===n[1]&&r===n[2]},d=function(e){i[e]=o,i[e+1]=l,i[e+2]=s,i[e+3]=255};u.length;){var v,p=void 0,h=void 0,g=void 0,b=void 0,_=u.pop(),E=Object(m.a)(_,2);for(b=4*((p=E[0])*t+(v=E[1]));p>=0&&f(b);)b-=4*t,p-=1;for(b+=4*t,p+=1,h=!1,g=!1;p<t&&f(b);)d(b),v>0&&(f(b-4)?h||(u.push([p,v-1]),h=!0):h&&(h=!1)),v<t-1&&(f(b+4)?g||(u.push([p,v+1]),g=!0):g&&(g=!1)),p+=1,b+=4*t}return i}(c,i,t,o,r),s=new ImageData(l,i,i);e.putImageData(s,0,0,0,0,i,i),n({canvasState:s})}},te=(a(64),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).mainCanvasRef=r.a.createRef(),e.drawingCanvasRef=r.a.createRef(),e.mainCanvas=null,e.drawingCanvas=null,e.mainContext=null,e.drawingContext=null,e.screen=null,e.handleMouseDown=e.handleMouseDown.bind(Object(L.a)(e)),e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){this.mainCanvas=this.mainCanvasRef.current,this.mainContext=this.mainCanvas.getContext("2d"),this.drawingCanvas=this.drawingCanvasRef.current,this.drawingContext=this.drawingCanvas.getContext("2d")}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=t.currentFrame,n=t.frames,r=t.canvas,i=e.currentFrame,c=e.frames,o=e.canvas;return a!==i||n.length!==c.length||r!==o}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.canvas.size,r=t[a];O(this.mainContext,n),r&&k(this.mainContext,r,n)}},{key:"handleMouseDown",value:function(e){var t=this.props,a=t.mainColor,n=t.currentTool,r=t.canvas,i=t.setCanvasState,c=t.penSize,o=t.setMainColor,l=t.secondColor;if(e.preventDefault(),""!==n){var s=e.pageX,u=e.pageY,m=this.mainCanvas.getBoundingClientRect(),d=2===e.button?l:a;this.mainContext.fillStyle=f(d),this.drawingContext.fillStyle=f(d);var p=v(s,u,r.pixelSize,m);switch(n){case"pen":q(this.mainContext,p,m,r,i,c);break;case"line":J(this.mainContext,this.drawingContext,p,m,r,i,c);break;case"eraser":$(this.mainContext,p,m,r,i,c);break;case"pipette":K(this.mainContext,p,r,o);break;case"fill-all":Q(this.mainContext,p,r,i,d);break;case"fill":ee(this.mainContext,p,r,i,d)}}}},{key:"render",value:function(){var e=this.props.canvas.size;return(r.a.createElement("div",{className:"canvas",id:"screen",onMouseDown:this.handleMouseDown,ref:this.myRef,onContextMenu:function(e){return e.preventDefault()}},r.a.createElement("canvas",{className:"canvas__main",ref:this.mainCanvasRef,width:e,height:e}),r.a.createElement("canvas",{className:"canvas__drawing",ref:this.drawingCanvasRef,width:e,height:e}),r.a.createElement("div",{className:"canvas__background"})))}}]),t}(n.Component)),ae={setCanvasState:function(e){return{type:"SET_CANVAS_STATE",payload:e}},setMainColor:P},ne=Object(o.b)((function(e){return{mainColor:e.mainColor,currentTool:e.currentTool,canvas:e.canvas,currentFrame:e.currentFrame,frames:e.frames,penSize:e.penSize,secondColor:e.secondColor}}),ae)(te),re=(a(65),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).myRef=r.a.createRef(),e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.image,a=e.size;if(t){var n=this.myRef.current.getContext("2d");k(n,t,a)}}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.image,a=e.size;if(t){var n=this.myRef.current.getContext("2d");k(n,t,a)}}},{key:"render",value:function(){var e=this.props,t=e.currentFrame,a=e.length,n=e.index,i=e.size,c=e.onDelete,o=e.onChange,l=e.onCopy;return r.a.createElement("div",{className:"frame ".concat(t===n&&"frame--active")},r.a.createElement("button",{className:"frame__body",type:"button",onClick:function(){return o(n)}},r.a.createElement("canvas",{className:"frame__canvas",id:"canvas",width:i,height:i,ref:this.myRef})),r.a.createElement("p",{className:"frame__index"},n+1),a>1&&r.a.createElement("button",{type:"button",className:"frame__button frame__button--delete",onClick:function(){return c(n)}}),r.a.createElement("button",{type:"button",className:"frame__button frame__button--copy",onClick:function(){return l(n)}}))}}]),t}(n.Component)),ie=(a(66),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).handleClick=e.handleClick.bind(Object(L.a)(e)),e.handleMouseDown=e.handleMouseDown.bind(Object(L.a)(e)),e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.addFrame,a=e.canvas.size;t(E(a))}},{key:"handleMouseDown",value:function(e){var t=this.props.swapFrame,a=e.target.parentNode;a.style.zIndex="9999";var n=+a.dataset.index,r=e.pageY,i=function(e){a.style.transform="translateY(".concat(e.pageY-r,"px)")};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(r){a.hidden=!0;var c=document.elementFromPoint(r.clientX,r.clientY);for(a.hidden=!1;c.classList;){if(c.classList.contains("frames__drag")){var o=+c.dataset.index;o!==n&&t(n,o);break}c=c.parentNode}a.style.transform="translateY(0px)",a.style.zIndex="1",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.frames,n=t.canvas.size,i=t.currentFrame,c=t.setCurrentFrame,o=t.deleteFrame,l=t.copyFrame,s=a.map((function(t,s){return r.a.createElement("li",{className:"frames__item",key:s},r.a.createElement("div",{className:"frames__drag",onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,"data-index":s},r.a.createElement(re,{size:n,currentFrame:i,length:a.length,index:s,image:t,onDelete:o,onChange:c,onCopy:l}),r.a.createElement("button",{className:"frames__drag-button",type:"button",onMouseDown:e.handleMouseDown})))}));return r.a.createElement("div",{className:"frames"},r.a.createElement("ul",{className:"frames__list"},s),r.a.createElement("button",{type:"button",className:"frames__button",onClick:this.handleClick},"Add new frame"))}}]),t}(n.Component)),ce={addFrame:function(e){return{type:"ADD_FRAME",payload:e}},setCurrentFrame:function(e){return{type:"SET_CURRENT_FRAME",payload:e}},deleteFrame:function(e){return{type:"DELETE_FRAME",payload:e}},copyFrame:function(e){return{type:"COPY_FRAME",payload:e}},swapFrame:function(e,t){return{type:"SWAP_FRAME",payload:{index1:e,index2:t}}}},oe=Object(o.b)((function(e){return{frames:e.frames,currentFrame:e.currentFrame,canvas:e.canvas}}),ce)(ie),le=(a(67),a(40)),se=a.n(le),ue=function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).canvasRef=r.a.createRef(),e.context=null,e.handleChange=e.handleChange.bind(Object(L.a)(e)),e.handleClick=e.handleClick.bind(Object(L.a)(e)),e.showAnimation=e.showAnimation.bind(Object(L.a)(e)),e.previewInterval=y(e.showAnimation),e.activeFrame=0,e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){this.context=this.canvasRef.current.getContext("2d")}},{key:"componentDidUpdate",value:function(e){var t=this.props.frameRate;if(t!==e.frameRate)if(this.previewInterval.clear(),0!==t){var a=1e3/t;this.previewInterval.start(a)}else this.drawFrame();this.drawFrame()}},{key:"showAnimation",value:function(){var e=this.props,t=e.frames,a=e.size,n=t.length,r=t[this.activeFrame],i=this.canvasRef.current.getContext("2d");O(i,a),r&&k(i,r,a),this.activeFrame=(this.activeFrame+1+n)%n}},{key:"drawFrame",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.size,r=this.canvasRef.current.getContext("2d"),i=t[a];O(r,n),i&&k(r,i,n)}},{key:"handleChange",value:function(e){(0,this.props.setFrameRate)(+e.target.value)}},{key:"handleClick",value:function(){(0,this.props.togglePreviewFullscreen)(!0)}},{key:"render",value:function(){var e=this.props,t=e.frameRate,a=e.size;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"preview"},r.a.createElement("canvas",{className:"preview__canvas",width:a,height:a,ref:this.canvasRef}),r.a.createElement("div",{className:"preview__background"}),r.a.createElement("button",{className:"preview__button",type:"button",onClick:this.handleClick},r.a.createElement("img",{className:"preview__icon",src:se.a,alt:"full-screen"})),r.a.createElement("div",{className:"preview__control"},r.a.createElement("p",{className:"preview__value"},t),r.a.createElement("input",{type:"range",value:t,min:"0",max:"24",step:"1",onChange:this.handleChange}))))}}]),t}(n.Component),me={setFrameRate:function(e){return{type:"SET_FRAME_RATE",payload:e}},togglePreviewFullscreen:G},fe=Object(o.b)((function(e){return{frames:e.frames,frameRate:e.frameRate,currentFrame:e.currentFrame,size:e.canvas.size}}),me)(ue),de=(a(68),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).canvasRef=r.a.createRef(),e.fullScrennRef=r.a.createRef(),e.context=null,e.showAnimation=e.showAnimation.bind(Object(L.a)(e)),e.handleFullScreenChange=e.handleFullScreenChange.bind(Object(L.a)(e)),e.previewInterval=y(e.showAnimation),e.activeFrame=0,e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){this.context=this.canvasRef.current.getContext("2d"),document.addEventListener("fullscreenchange",this.handleFullScreenChange)}},{key:"componentDidUpdate",value:function(){if(this.props.isOpenFullscreen){this.fullScrennRef.current.requestFullscreen();var e=this.props.frameRate;if(0!==e){var t=1e3/e;this.previewInterval.start(t)}else this.drawFrame()}}},{key:"handleFullScreenChange",value:function(){if(!document.fullscreenElement){var e=this.props.togglePreviewFullscreen;this.previewInterval.clear(),e(!1)}}},{key:"showAnimation",value:function(){var e=this.props,t=e.frames,a=e.canvas.size,n=t.length,r=t[this.activeFrame],i=this.canvasRef.current.getContext("2d");O(i,a),r&&k(i,r,a),this.activeFrame=(this.activeFrame+1+n)%n}},{key:"drawFrame",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.canvas.size,r=this.canvasRef.current.getContext("2d"),i=t[a];O(r,n),i&&k(r,i,n)}},{key:"render",value:function(){var e=this.props,t=e.canvas.size,a=e.isOpenFullscreen;return r.a.createElement("div",{className:"preview-fullscreen ".concat(a?"preview-fullscreen--active":""),ref:this.fullScrennRef},r.a.createElement("div",{className:"preview-fullscreen__body"},r.a.createElement("canvas",{className:"preview-fullscreen__canvas",width:t,height:t,ref:this.canvasRef}),r.a.createElement("div",{className:"preview-fullscreen__background"})))}}]),t}(n.Component)),ve={togglePreviewFullscreen:G},pe=Object(o.b)((function(e){return{frames:e.frames,frameRate:e.frameRate,currentFrame:e.currentFrame,canvas:e.canvas,isOpenFullscreen:e.isOpenFullscreen}}),ve)(de),he=a(23),ge=a.n(he),be=a(41),_e=a.n(be),Ee=function(e,t){var a=document.createElement("canvas");a.height=t,a.width=t;var n=a.getContext("2d");return e.map((function(e){return O(n,t),k(n,e,t),a.toDataURL()}))},Ce=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"animation",r=Ee(e,t),i=new _e.a({workers:2,quality:10,background:"#ffffff",width:t,height:t});r.forEach((function(e){var n=new Image(t,t);n.src=e,i.addFrame(n,{delay:a})})),i.on("finished",(function(e){ge()(e,"".concat(n))})),i.render()},ye=a(42),Oe=a.n(ye),ke=function(e,t){var a=document.createElement("canvas");a.height=t,a.width=t;var n=a.getContext("2d");return e.map((function(e){return O(n,t),k(n,e,t),n.getImageData(0,0,t,t).data.buffer}))},Ne=function(e,t){return e.map((function(){return 1e3*t}))},je=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"animation",r=ke(e,t),i=Ne(e,a),c=Oe.a.encode(r,t,t,0,i);ge()(c,"".concat(n,".apng"))},we=(a(89),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(z.a)(this,Object(A.a)(t).call(this))).state={value:"New Piskel"},e.handleClickOnGifButton=e.handleClickOnGifButton.bind(Object(L.a)(e)),e.handleClickOnApngButton=e.handleClickOnApngButton.bind(Object(L.a)(e)),e.handleChange=e.handleChange.bind(Object(L.a)(e)),e}return Object(M.a)(t,e),Object(R.a)(t,[{key:"handleClickOnGifButton",value:function(){var e=this.props,t=e.frames,a=e.size,n=e.frameRate,r=this.state.value;Ce(t,a,n,r)}},{key:"handleClickOnApngButton",value:function(){var e=this.props,t=e.frames,a=e.size,n=e.frameRate,r=this.state.value;je(t,a,n,r)}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.state.value;return r.a.createElement("div",{className:"export-menu"},r.a.createElement("p",{className:"export-menu__title"},"Export as:"),r.a.createElement("input",{className:"export-menu__input",type:"text",value:e,onChange:this.handleChange}),r.a.createElement("div",{className:"export-menu__button-group"},r.a.createElement("button",{className:"export-menu__button",type:"button",onClick:this.handleClickOnGifButton},"gif"),r.a.createElement("button",{className:"export-menu__button",type:"button",onClick:this.handleClickOnApngButton},"apng")))}}]),t}(n.Component)),xe=Object(o.b)((function(e){return{frames:e.frames,frameRate:e.frameRate,size:e.canvas.size}}))(we),Fe=(a(90),function(e){var t=e.handleClick,a=e.children,n=e.isActive,i=void 0!==n&&n;return r.a.createElement("button",{className:"button ".concat(i?"button--active":""),type:"button",onClick:t},a)}),Se=(a(91),32),Re=64,ze=128,Ae={setSize:function(e){return{type:"SET_SIZE",payload:e}}},Le=Object(o.b)((function(e){return{size:e.canvas.size}}),Ae)((function(e){var t=e.size,a=e.setSize;return r.a.createElement("div",{className:"resize-menu"},r.a.createElement(Fe,{isActive:t===Se,handleClick:function(){return a(Se)}},"32"),r.a.createElement(Fe,{isActive:t===Re,handleClick:function(){return a(Re)}},"64"),r.a.createElement(Fe,{isActive:t===ze,handleClick:function(){return a(ze)}},"128"))})),Me=(a(92),function(){return r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"main__left-menu"},r.a.createElement(Z,null),r.a.createElement(Y,null),r.a.createElement(H,null)),r.a.createElement("div",{className:"main__frames"},r.a.createElement(oe,null)),r.a.createElement("div",{className:"main__canvas"},r.a.createElement(ne,null)),r.a.createElement("div",{className:"main__right-menu"},r.a.createElement(fe,null),r.a.createElement(pe,null),r.a.createElement(xe,null),r.a.createElement(Le,null)))}),Te=a(43),De=a.n(Te),Ie=a(44),Pe=a.n(Ie),Ge=a(45),Ue=a.n(Ge),Be=a(46),Ye=a.n(Be),We=a(47),Xe=a.n(We),He=a(48),Ve=a.n(He),Ze=(a(93),function(){return r.a.createElement("main",{className:"landing-page"},r.a.createElement("div",{className:"landing-page__wrap"},r.a.createElement("div",{className:"landing-page__preview"},r.a.createElement("div",{className:"landing-page__info"},r.a.createElement("h1",{className:"landing-page__title"},"Piskel is a free online editor for animated sprites & pixel art"),r.a.createElement(x.b,{to:"/create",className:"landing-page__button"},"Create Sprite")),r.a.createElement("img",{className:"landing-page__screen",src:De.a,alt:"piskel-clone"})),r.a.createElement("div",{className:"landing-page__animation animation"},r.a.createElement("div",null,r.a.createElement("p",{className:"animation__title"},"Animation examples"),r.a.createElement("ul",{className:"animation__list"},r.a.createElement("li",{className:"animation__item"},r.a.createElement("img",{className:"animation__image",src:Pe.a,alt:"animation"})),r.a.createElement("li",{className:"animation__item"},r.a.createElement("img",{className:"animation__image",src:Ue.a,alt:"animation"})),r.a.createElement("li",{className:"animation__item"},r.a.createElement("img",{className:"animation__image",src:Ye.a,alt:"animation"})),r.a.createElement("li",{className:"animation__item"},r.a.createElement("img",{className:"animation__image",src:Xe.a,alt:"animation"})),r.a.createElement("li",{className:"animation__item"},r.a.createElement("img",{className:"animation__image",src:Ve.a,alt:"animation"}))))),r.a.createElement("div",{className:"landing-page__functionality"},r.a.createElement("div",null,r.a.createElement("p",{className:"functionality__title"},"Available functionality"),r.a.createElement("ul",{className:"functionality__list"},r.a.createElement("li",{className:"functionality__item functionality__item--tools"},"Support 6 tools"),r.a.createElement("li",{className:"functionality__item functionality__item--maximize"},"Support three canvas size"),r.a.createElement("li",{className:"functionality__item functionality__item--export"},"Export as GIF and APNG"),r.a.createElement("li",{className:"functionality__item functionality__item--google"},"Google authentication"),r.a.createElement("li",{className:"functionality__item functionality__item--preview"},"Live preview"),r.a.createElement("li",{className:"functionality__item functionality__item--save"},"Saving session")))),r.a.createElement("p",{className:"landing-page__copyright"},"\xa9 Copyright 2019 by Mukhin Anton")))}),qe=(a(95),function(){return r.a.createElement(x.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement(F.c,null,r.a.createElement(F.a,{path:"/create"},r.a.createElement(Me,null)),r.a.createElement(F.a,{path:"/"},r.a.createElement(Ze,null)))))}),Je=(a(96),document.getElementById("root"));c.a.render(r.a.createElement(o.a,{store:w},r.a.createElement(qe,null)),Je),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.70e04b1e.chunk.js.map